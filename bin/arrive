#!/bin/bash

HOME="$(cd;pwd)"
CONFIG_PATH="$HOME/.config"

PROGRAMS=(
  zsh
  neovim
  git
  gcc
  g++
  python3
  python3-pip
  wget
)

# Install programs
if [[ "$OSTYPE" == "darwin"* ]]; then
  if hash brew 2>/dev/null; then
    echo "Brew installed"
  else
    echo "Installing Brew"
    /usr/bin/ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
  fi

  echo "Installing Software"
  brew install --appdir="/Applications" ${PROGRAMS[*]}

  echo "Installing Mac specific programs"
  brew cask install homebrew/cask/alfred
else
  if [[ apt ]]; then
    echo "Updating Apt"
    pkg update

    echo "Installing Software"
    pkg install ${PROGRAMS[*]}
  else
    if [[ apt ]]; then
      echo "Updating Apt"
      sudo apt-get update

      echo "Installing Software"
      sudo apt-get -f install ${PROGRAMS[*]}
    else
      echo "Installing Software"
      sudo pacman -Syyu ${PROGRAMS[*]}
    fi
  fi
fi

git clone git@github.com:zsh-users/zsh-autosuggestions ${ZSH_CUSTOM:-~/.ohmyzsh/custom}/plugins/zsh-autosuggestions
git clone git@github.com:zsh-users/zsh-completions ${ZSH_CUSTOM:-~/.ohmyzsh/custom}/plugins/zsh-completions
git clone git@github.com:google/greasy.git ${CONFIG_PATH}/greasy
git clone git@github.com:romkatv/powerlevel10k ${HOME}/.powerlevel10k
git clone git@github.com:Cypher1/notes.git ${HOME}/notes
git clone git@github.com:Cypher1/tako.git ${HOME}/tako
git clone git@github.com:Cypher1/no_debug.git ${HOME}/no_debug
git clone git@github.com:Cypher1/cypher1.github.io.git ${HOME}/cypher1.github.io
git clone git@github.com:project-oak/arcsjs-provable.git ${HOME}/arcsjs-provable

# Install plug
curl -fLo ~/.local/share/nvim/site/autoload/plug.vim --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim

nvim +PlugInstall

echo "Installing Python Libraries"
pip install --upgrade pip
pip install neovim

echo "Switch to zsh"
sudo chsh "$(whoami)" -s "$(which zsh)" || echo "Possibly not root"
